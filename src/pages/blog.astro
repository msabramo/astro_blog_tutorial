---
import { getCollection } from "astro:content";
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogPost from '../components/BlogPost.astro';

interface Frontmatter {
  title: string;
  pubDate: string;
  description: string;
  author: string;
  image?: {
    url: string;
    alt: string;
  };
  tags?: string[];
}

interface MarkdownPost {
  url: string;
  frontmatter: Frontmatter;
}

const allPosts = await getCollection('blog');
console.log('allPosts', JSON.stringify(allPosts, null, 2));
---

<BaseLayout pageTitle="Blog">
    <p>This is where I will post about my journey learning Astro.</p>
    <ul>
      {
        allPosts.map((post) => 
          <BlogPost 
            url={`/posts/${post.id}`} 
            title={post.data.title} 
          />
        )
      }
    </ul>
</BaseLayout>